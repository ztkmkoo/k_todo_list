<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <style>
        table {
            font-family: Arial, sans-serif;
            border-collapse: collapse;
            width: 100%;
        }

        td, th {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }

        tr:nth-child(even) {
            background-color: #cccccc;
        }
    </style>
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
    <h1>
        To Do List
    </h1>
    <!--<link rel="stylesheet" type="text/css" href="/css/table.css">-->
</head>
<body>
<div>
    <form action="javascript:insertNewToDo(todo.value, todoRef.value)">
        <input type="text" id="todo" name="todo" placeholder="할일을 적어주세요.">
        <input type="text" id="todoRef" name="todoRef" placeholder="참조 할일">
        <input type="submit" value="할일 추가">
    </form>
</div>
<div>
    <table>
        <thead>
        <th>id</th>
        <th>할일</th>
        <th>참조 할일 id</th>
        <th>작성일시</th>
        <th>최종수정일시</th>
        <th>완료처리</th>
        </thead>
        <tbody>
        <tr th:each="toDo : ${toDoList}">
            <td th:text="${toDo.id}"></td>
            <td th:text="${toDo.toDo}"></td>
            <td th:text="${toDo.refList}"></td>
            <td th:text="${toDo.registerDate}"></td>
            <td th:text="${toDo.modifyDate}"></td>
            <td th:text="${toDo.isDone} > 0 ? Y : N"></td>
        </tr>
        </tbody>
    </table>
</div>
<script type="text/javascript">
function test(text) {
    alert(text);
}
function insertNewToDo(todo, todoRef) {
    var request = new Object();
    request["todo"] = todo;
    request["todoRef"] = todoRef;

    var json = JSON.stringify(request);

    $.get({
        url: "/test",
        type: 'POST',
        data: json,
        dataType: 'json'
    }).done(function (res) {
        alert("done: " + res);
    }).fail(function (xhr, status, errorThrown) {
        alert("fail" + xhr + ", " + status + ", " + errorThrown);
    })
}
</script>
</body>
</html>